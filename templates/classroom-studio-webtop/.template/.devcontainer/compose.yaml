services:
  dev:
    image: ghcr.io/airnub-labs/dev-web:latest
    user: "vscode"
    volumes:
      - ..:/workspaces:cached
    shm_size: "2gb"

  webtop:
    image: lscr.io/linuxserver/webtop:ubuntu-xfce
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - CUSTOM_USER=vscode
    volumes:
      - ..:/workspace
      - type: bind
        source: {{#templateOption.chromePolicies}}{{.}}{{/templateOption.chromePolicies}}{{^templateOption.chromePolicies}}.devcontainer/policies/{{templateOption.policyMode}}.json{{/templateOption.chromePolicies}}
        target: /etc/opt/chrome/policies/managed/managed.json
        read_only: true
    ports:
      - "${WEBTOP_PORT:-{{templateOption.webtopPort}}}:3000"
    shm_size: "2gb"
